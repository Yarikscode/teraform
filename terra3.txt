#–°–ø–æ—Å–æ–±—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚≠êÔ∏è –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Terraform —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –º–∞—à–∏–Ω–µ, —Å –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É–¥–æ–±–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ –∏–ª–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
‚≠êÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ —É–¥–∞–ª—ë–Ω–Ω–æ–º –±—ç–∫–µ–Ω–¥–µ
–≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –ø–æ–¥–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ, –Ω–æ –≤–∞–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ state-—Ñ–∞–π–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ –≤–∞–∂–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º. –í Yandex Cloud –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å Yandex Object Storage –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ S3-–±—ç–∫–µ–Ω–¥ –¥–ª—è Terraform.
‚≠êÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ —É–¥–∞–ª—ë–Ω–Ω–æ–º –±—ç–∫–µ–Ω–¥–µ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
–≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª–µ–Ω, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –±—ç–∫–µ–Ω–¥–∞ Terraform –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏. –í Yandex Cloud –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å YDB, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º ‚Äî –∫–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å Terraform, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –Ω–∞–¥—ë–∂–Ω–æ–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–∞–∫ –∫–æ–¥–æ–º


#–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ—Å—É—Ä—Å–∞ –≤ state:
mode ‚Äî —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞ –≤ state: data –∏–ª–∏ managed;
type ‚Äî —Ç–∏–ø –±–ª–æ–∫–∞ —Ä–µ—Å—É—Ä—Å–∞;
name ‚Äî –∏–º—è –±–ª–æ–∫–∞ —Ä–µ—Å—É—Ä—Å–∞;
attributes ‚Äî –≤—ã—Ö–æ–¥–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏–ª Terraform –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤ state

#–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–µ–Ω–¥-—Ñ–∞–π–ª–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–í —Ñ–∞–π–ª–µ backend.tf –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç—Ä–∏ –≥—Ä—É–ø–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
üíª –ü—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–π –Ω–∏–∂–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∞–∫—Ç—É–∞–ª–µ–Ω –≤ –≤–µ—Ä—Å–∏–∏ Terraform v1.6.0 –∏ –≤—ã—à–µ.
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–∞–∫–µ—Ç–∞
region ‚Äî —Ä–µ–≥–∏–æ–Ω, –≥–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –±–∞–∫–µ—Ç.
bucket ‚Äî –∏–º—è –±–∞–∫–µ—Ç–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è state-—Ñ–∞–π–ª–∞.
key ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ state-—Ñ–∞–π–ª–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä dev/terraform.tfstate.
endpoints.s3 ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∫–µ—Ç—É.
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
dynamodb_table ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ YDB.
endpoints.dynamodb ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ YDB-–±–∞–∑—ã.

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ backend.tf —Ç—Ä–µ–±—É—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
–†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É terraform init -reconfigure.
–í –º–æ–º–µ–Ω—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–ø–∞–ª–∞ —Å–≤—è–∑—å —Å –±—ç–∫–µ–Ω–¥–æ–º
–†–µ—à–µ–Ω–∏–µ: –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π terraform force-unlock LOCK_ID. 
–ü—Ä–∏–º–µ—Ä LOCK_ID: yandex_storage_bucket.dev.

–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ—Å—Ç—É–ø–æ–≤ –∫ –±–∞–∫–µ—Ç—É –∏–ª–∏ YDB ‚Äî Access denied
–£ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Ç—Ä–∏ –ø—Ä–∏—á–∏–Ω—ã:
–û–±—ä—è–≤–ª–µ–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ AWS_ACCESS_KEY_ID –∏ AWS_SECRET_ACCESS_KEY.
–û–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –±–∞–∫–µ—Ç—É
–†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –≤ –∫–æ–Ω—Å–æ–ª–∏, –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è: Yandex Cloud ‚Üí –ë–∞–∫–µ—Ç ‚Üí –ü–æ–ª–∏—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞.
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω—É–∂–Ω—ã—Ö —Ä–æ–ª–µ–π –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
–†–µ—à–µ–Ω–∏–µ: —É –≤–∞—Å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–æ–ª–∏ storage.admin, kms.editor, ydb.editor. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Ö –Ω–∞–ª–∏—á–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏: Yandex Cloud ‚Üí –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã ‚Üí –ê–∫–∫–∞—É–Ω—Ç.
–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
–†–µ—à–µ–Ω–∏–µ: –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ —Å–Ω—è—Ç–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ state-—Ñ–∞–π–ª–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ.

#–ú–æ–¥—É–ª–∏

 –ú–æ–¥—É–ª—å Terraform ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ Terraform. –ú–æ–¥—É–ª—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–∞–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ .tf –∏–ª–∏ .tf.json –≤ –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ Terraform, —Å–∫—Ä—ã–≤–∞—è –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.


üåü –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è
–ú–æ–¥—É–ª–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–∫—Ä—ã—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
üåü –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ü—Ä–∏ –ø–æ–º–æ—â–∏ –º–æ–¥—É–ª–µ–π –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö, –∏–∑–±–µ–≥–∞—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.
üåü –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏
–ú–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ Terraform Registry –∏–ª–∏ –¥—Ä—É–≥–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±–∏—Ä–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–¥—É–ª—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö.
üåü –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è
–ú–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Ö –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.
üåü –í—ã—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
–ú–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ Terraform-–∫–æ–¥–∞ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ IP-–∞–¥—Ä–µ—Å —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥—Ä—É–≥–∏–º —Ä–µ—Å—É—Ä—Å–∞–º.

–ü—Ä–∏–º–µ—Ä

module "network" {
  source  = "github.com/terraform-yc-modules/terraform-yc-vpc.git?ref=1.0.5"

  network_name        = "network-module-example"
  network_description = "terraform-created"
  create_vpc          = true
  
  public_subnets = [
    {
      "v4_cidr_blocks" : ["10.121.0.0/16"],
      "zone" : "ru-central1-a"
    },
    {
      "v4_cidr_blocks" : ["10.131.0.0/16"],
      "zone" : "ru-central1-b"
    },
    {
      "v4_cidr_blocks" : ["10.141.0.0/16"],
      "zone" : "ru-central1-d"
    }
  ]
}


–í—ã–∑–æ–≤ –º–æ–¥—É–ª–µ–π
–î–æ—á–µ—Ä–Ω–∏–µ –º–æ–¥—É–ª–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –±–ª–æ–∫–∞ module. 
module "servers" {
  source = "./modules/application-cluster"

  name    = "default-cluster"
  servers = 5  
}


–í –±–ª–æ–∫–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç source. –û–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç, –æ—Ç–∫—É–¥–∞ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å –∏ –∫—É–¥–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –º–æ–¥—É–ª—è. –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ –≤—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî name –∏ servers. –í –≤—ã–∑—ã–≤–∞–µ–º–æ–º –¥–æ—á–µ—Ä–Ω–µ–º –º–æ–¥—É–ª–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω—ã —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.  
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –º–æ–¥—É–ª—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–∞–∞—Ä–≥—É–º–µ–Ω—Ç—ã:
count –∏ for_each –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤;
depends_on –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —è–≤–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
–ú–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π terraform init. 


#–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –º–æ–¥—É–ª–µ–π
Terraform –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç source –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –º–æ–¥—É–ª—è –Ω–∞ —ç—Ç–∞–ø–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–π terraform init. 
Terraform –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –º–æ–¥—É–ª–µ–π –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –ü–µ—Ä–≤—ã–µ —Ç—Ä–∏ –≤ —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ:
Local paths (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å)
Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
Terraform Registry
Bitbucket
Generic Git, Mercurial repositories
HTTP URLs
S3 buckets
GCS buckets

#Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
–ú–æ–¥—É–ª–∏ Terraform –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏–∑ git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.
–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é:
HTTPS:
module "vpc" {
  source = "git::https://github.com/terraform-yc-modules/terraform-yc-vpc"
}   
SSH:
module "vpc" {
  source = "git::github.com:terraform-yc-modules/terraform-yc-vpc.git"
}   
–î–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Ä–≥—É–º–µ–Ω—Ç ref —Å —É–∫–∞–∑–∞–Ω–∏–µ–º:
–¢–µ–≥–∞:
module "vpc" {
  source = "git::github.com/terraform-yc-modules/terraform-yc-vpc.git?ref=1.0.4"
}   
–•–µ—à–∞ SHA-1 –∫–æ–º–º–∏—Ç–∞:
module "vpc" {
  source = "git::github.com/terraform-yc-modules/terraform-yc-vpc.git?ref=bf916d3a4fcb6686065f9dcbe52a95f55197b096" # Commit Hash for 1.0.4
}

#Terraform Registry

module "vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "5.7.1"
}

#–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –º–æ–¥—É–ª–µ–π 

output "id" {
  description = "Security group ID"
  value       = yandex_vpc_security_group.this.id
}  

module "security_group" {
  source = "github.com/terraform-yc-modules/terraform-yc-security-group.git"
...
}

resource "yandex_vpc_subnet" "private" {
...
  security_group_ids = [module.security_group.id]
...  
}

#–ë–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç

-- PROJECT-DIRECTORY/
-- modules/
      -- <service1-name>/
         -- examples/
         -- main.tf
         -- variables.tf
         -- outputs.tf
         -- provider.tf
         -- README
      -- <service2-name>/
         -- examples/
         -- main.tf
         -- variables.tf
         -- outputs.tf
         -- provider.tf
         -- README
      -- ...other‚Ä¶
 -- environments/
  -- dev/
         -- backend.tf
         -- main.tf
         -- outputs.tf
         -- variables.tf
         -- terraform.tfvars
 -- test/
         -- backend.tf
         -- main.tf
         -- outputs.tf
         -- variables.tf
         -- terraform.tfvars
-- stage/
         -- backend.tf
         -- main.tf
         -- outputs.tf
         -- variables.tf
         -- terraform.tfvars
-- prod/
         -- backend.tf
         -- main.tf
         -- outputs.tf
         -- variables.tf
         -- terraform.tfvars